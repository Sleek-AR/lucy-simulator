<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <title>Lucy Bewerbungssimulator</title>
    <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-event-set-component@5.0.0/dist/aframe-event-set-component.min.js"></script>
    <script src="/js/aframe-components.js"></script>
    <script src="/js/main.js" type="module"></script>
    <style>
      body {
        margin: 0;
        font-family: sans-serif;
        overflow: hidden;
      }
      #log {
        position: absolute;
        bottom: 0;
        width: 100%;
        max-height: 150px;
        overflow-y: auto;
        background: rgba(255, 255, 255, 0.95);
        padding: 10px;
        font-size: 14px;
      }
      .blinker {
        position: absolute;
        top: 10px;
        right: 10px;
        width: 15px;
        height: 15px;
        background-color: red;
        border-radius: 50%;
        animation: blink 1s infinite;
        z-index: 9999;
        display: none;
      }
      @keyframes blink {
        0% {
          opacity: 1;
        }
        50% {
          opacity: 0;
        }
        100% {
          opacity: 1;
        }
      }
      #roleSelect {
        position: absolute;
        top: 10px;
        left: 10px;
        z-index: 9999;
        font-size: 16px;
        padding: 4px;
      }
    </style>
  </head>
  <body>
    <div class="blinker" id="blinker"></div>
    <select id="roleSelect">
      <option value="recruiter">Lucy Recruiter</option>
      <option value="bewerberin">Lucy Bewerberin</option>
      <option value="konflikt">Konflikttraining</option>
      <option value="telefon">Telefontraining</option>
    </select>
    <a-scene
      xr-compatible
      vr-mode-ui="enabled: true"
      background="color: #ECECEC"
    >
      <a-assets>
        <a-asset-item
          id="lucyModel"
          src="https://models.readyplayer.me/6823269dbdbf61e0facd5a12.glb"
        ></a-asset-item>
        <a-asset-item
          id="officeSet"
          src="https://raw.githubusercontent.com/Sleek-AR/lucy-simulator/main/icons8_high_chairs_blackboard_round_table.glb"
        ></a-asset-item>
      </a-assets>

      <a-light type="ambient" intensity="1.0"></a-light>
      <a-sky color="#dfe9f3"></a-sky>
      <a-plane color="#ccc" rotation="-90 0 0" width="30" height="30"></a-plane>

      <a-entity id="cameraRig" movement-controls="speed: 0.1" position="0 0 0">
        <a-camera
          id="camera"
          wasd-controls-enabled="true"
          raycaster="objects: .clickable"
          cursor="rayOrigin: entity"
        >
          <a-entity
            cursor
            geometry="primitive: ring; radiusInner: 0.01; radiusOuter: 0.015"
            material="color: black; shader: flat"
            position="0 0 -1"
          ></a-entity>
        </a-camera>

        <a-entity
          laser-controls="hand: left"
          raycaster="objects: .clickable"
          line="color: #00BFFF"
          move-rig-with-thumbstick
        ></a-entity>
        <a-entity
          laser-controls="hand: right"
          raycaster="objects: .clickable"
          line="color: #00BFFF"
          move-rig-with-thumbstick
        ></a-entity>
      </a-entity>

      <a-entity
        id="lucy"
        gltf-model="#lucyModel"
        position="0 0 -2"
        scale="1.5 1.5 1.5"
        visible="true"
        animation__speak="property: scale; to: 1.55 1.45 1.55; dir: alternate; dur: 200; loop: true; startEvents: speak; pauseEvents: stopspeak"
      ></a-entity>

      <a-entity
        gltf-model="#officeSet"
        position="-3 0 -6"
        scale="0.7 0.7 0.7"
        rotation="0 0 0"
      ></a-entity>

      <a-entity
        id="thinkingText"
        text="value: Lucy denkt nach...; align: center; color: #555"
        position="0 3.2 -2"
        visible="false"
      >
        <a-animation
          attribute="material.opacity"
          from="0.3"
          to="1"
          dur="1000"
          direction="alternate"
          repeat="indefinite"
        ></a-animation>
      </a-entity>

      <a-entity
        id="listeningText"
        text="value: Lucy nimmt dich gerade wahr...; align: center; color: #f00"
        position="0 2.9 -2"
        visible="false"
      >
        <a-animation
          attribute="material.opacity"
          from="0.3"
          to="1"
          dur="1000"
          direction="alternate"
          repeat="indefinite"
        ></a-animation>
      </a-entity>

      <a-entity
        id="recordButton"
        geometry="primitive: plane; height: 0.3; width: 1.4"
        material="color: #00BFFF"
        position="0 1 -1.5"
        text="value: ðŸŽ™ Leertaste oder Trigger halten; align: center"
        class="clickable"
      ></a-entity>

      <a-entity id="vrMenu" position="2 1.5 -6">
        <a-plane
          width="1.8"
          height="1.8"
          color="#ffffff"
          opacity="0.95"
          material="shader: flat"
          position="0 0 0"
        ></a-plane>
        <a-text
          value="Die Rolle von Lucy festlegen:"
          align="center"
          color="#000"
          width="2"
          position="0 0.45 0.01"
        ></a-text>

        <a-entity
          class="clickable"
          geometry="primitive: plane; height: 0.25; width: 1.5"
          material="color: #00BFFF"
          position="0 0.2 0.01"
          onclick="setRole('recruiter')"
        >
          <a-text
            value="Lucy Recruiter"
            align="center"
            color="#fff"
            width="1.2"
            position="0 0 0.01"
          ></a-text>
        </a-entity>

        <a-entity
          class="clickable"
          geometry="primitive: plane; height: 0.25; width: 1.5"
          material="color: #00BFFF"
          position="0 -0.1 0.01"
          onclick="setRole('bewerberin')"
        >
          <a-text
            value="Lucy Bewerberin"
            align="center"
            color="#fff"
            width="1.2"
            position="0 0 0.01"
          ></a-text>
        </a-entity>

        <a-entity
          class="clickable"
          geometry="primitive: plane; height: 0.25; width: 1.5"
          material="color: #00BFFF"
          position="0 -0.4 0.01"
          onclick="setRole('konflikt')"
        >
          <a-text
            value="Konflikttraining"
            align="center"
            color="#fff"
            width="1.2"
            position="0 0 0.01"
          ></a-text>
        </a-entity>

        <a-entity
          class="clickable"
          geometry="primitive: plane; height: 0.25; width: 1.5"
          material="color: #00BFFF"
          position="0 -0.7 0.01"
          onclick="setRole('telefon')"
        >
          <a-text
            value="Telefontraining"
            align="center"
            color="#fff"
            width="1.2"
            position="0 0 0.01"
          ></a-text>
        </a-entity>

        <a-entity
          id="simpleCallButton"
          class="clickable"
          position="-2 0 2"
          visible="false"
        >
          <a-plane
            width="1.8"
            height="0.4"
            color="#28a745"
            material="shader: flat"
          >
            <a-text
              value="ðŸ“ž +43 660 3262626 anrufen"
              align="center"
              color="#ffffff"
              width="2.5"
              position="0 0 0.01"
            ></a-text>
          </a-plane>
        </a-entity>
      </a-entity>
    </a-scene>

    <div id="log">ðŸ’¬ Lucy wartet auf deine Stimme...</div>
  </body>
</html>

